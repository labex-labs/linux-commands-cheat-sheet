# Handling Syntax Errors in bison

In this step, we will learn how to handle syntax errors in the parser generated by bison.

Let's modify the `example.y` file to include error handling:

```
%{
#include <stdio.h>
%}

%token NUM
%error-verbose

%%

input:
    | input line
    | input error '\n' { yyerrok; }
;

line:
    NUM '\n' { printf("Received number: %d\n", $1); }
    | error '\n' { yyerror("Invalid input"); }
;

%%

void yyerror(const char *s) {
    fprintf(stderr, "%s\n", s);
}

int main() {
    yyparse();
    return 0;
}
```

The key changes are:

1. Added `%error-verbose` to provide more detailed error messages.
2. Added an `error` rule in the `input` and `line` productions to handle syntax errors.
3. Implemented the `yyerror` function to print the error message.

Now, let's regenerate the parser and test it:

```bash
bison -d example.y
flex -o example.lex.c example.l
gcc -o example example.tab.c example.lex.c
```

Try running the `example` program and entering some invalid input:

```bash
./example
abc
example.y:12: syntax error, unexpected error, expecting NUM
Invalid input
123
Received number: 123
```

As you can see, the parser correctly identifies and reports the syntax error when we enter "abc" instead of a number.
